leave_home:
  sequence:
    - service: script.heating_away
    - service: automation.turn_off
      entity_id:
        - automation.heating_on_every_morning
    - service: vacuum.set_fan_speed
      data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
        fan_speed: standard
    - service: vacuum.start
      data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
    - service: script.all_lights_off
    - service: script.all_media_off

back_home:
  sequence:
    - service: script.heating_back
    - service: media_player.turn_on
      entity_id:
        - media_player.virgin_tivo
        - media_player.philips_tv
    - service: automation.turn_on
      entity_id:
        - automation.heating_on_every_morning
    - service: vacuum.set_fan_speed
      data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
        fan_speed: standard
    - service: vacuum.return_to_base
      entity_id:
        - vacuum.xiaomi_vacuum_cleaner

morning:
  sequence:
    - service: script.heating_morning
    - service: input_select.select_option
      data:
        entity_id: input_select.play_radio
        option: 'Český rozhlas Radiožurnál'
    - service: switch.turn_on
      entity_id: switch.kitchen_light

bedtime:
  sequence:
    - service: light.turn_on
      entity_id: light.bedroom_lamp
    - service: script.heating_night
    - service: light.turn_off
      data:
        entity_id:
          - group.living_room_lights
          - light.dining_room_light
          - light.loft_lamp
          - light.office_lamp
    - service: light.turn_off
      data:
        entity_id: light.bedroom_lamp
        transition: 900
    - service: script.all_media_off

bedside_actions:
  sequence:
    - service_template: >
        {% if action == 'single' %} script.toggle_bedroom_light
        {% elif action == 'double' %} script.bedtime
        {% elif action == 'hold' %} script.morning
        {% endif %}

start_work:
  sequence:
    - service: script.set_thermostat
      data:
        entity_id: climate.living_room
        temperature: 19.5
    - service: vacuum.set_fan_speed
      data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
        fan_speed: standard
    - service: vacuum.start
      data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
    - service: light.turn_off
      entity_id:
        - group.living_room_lights
        - light.dining_room_light
    - service: switch.turn_off
      entity_id: switch.kitchen_light
    - service: media_player.turn_off
      entity_id:
        - media_player.downstairs_speakers
        - media_player.virgin_tivo
        - media_player.philips_tv

all_media_off:
  sequence:
    - service: media_player.turn_off
      entity_id:
        - media_player.downstairs_speakers
        - media_player.frontier_silicon_speaker
        - media_player.office_speaker
        - media_player.loft_speaker
        - media_player.bedroom_speaker
        - media_player.virgin_tivo
        - media_player.xboxone
        - media_player.philips_tv

all_lights_off:
  sequence:
    - service: light.turn_off
      entity_id:
        - group.living_room_lights
        - light.dining_room_light
        - light.loft_lamp
        - light.office_lamp
        - light.bedroom_lamp
    - service: switch.turn_off
      entity_id: switch.kitchen_light

vacuum_kitchen:
  sequence:
    - service: vacuum.send_command
      data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
        command: app_zoned_clean
        params: [[22390,19943,24740,23143,1]]

play_radio:
  sequence:
    - service: media_player.play_media
      data_template:
        entity_id: media_player.downstairs_speakers
        media_content_type: channel
        media_content_id: >
          {% if is_state("input_select.play_radio", "Český rozhlas Radiožurnál") %}https://ice7.radia.cz/cro1-128.aac
          {% elif is_state("input_select.play_radio", "Rádio Krokodýl") %}http://icecast4.play.cz/krokodyl128.mp3
          {% else %}none
          {% endif %}

doorbell:
  sequence:
    - service: xiaomi_aqara.play_ringtone
      data:
        gw_mac: !secret xiaomi_gateway_mac
        ringtone_id: 10
        ringtone_vol: 60
    - service: notify.notify
      data:
        title: Home Assistant
        message: Someone's at the door

ambilight_off:
  sequence:
    - service: light.turn_on
      data:
        entity_id: light.ambilight
        brightness: 1
        effect: Manual

ambilight_on:
  sequence:
    - service: light.turn_on
      data:
        entity_id: light.ambilight
        effect: Natural
